ã“ã®ãƒšãƒ¼ã‚¸ã¯ã®çµŒé¨“ã‚’N-Queensã‚’ç ”ç©¶é–‹ç™ºã™ã‚‹ã“ã¨ã®å®Ÿè·µã§å¾—ãŸå¤±æ•—ã¨æˆåŠŸã‚’æ•´ç†çµ±åˆã—Python/codonæ´»ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã™ã€‚ã€ŒCodon ã¨ã¯ä½•ã‹ã€ã€Œãªãœä½¿ã†ã®ã‹ã€ã€Œã©ã®ã‚ˆã†ã«æ§‹ç¯‰ã—ã€é«˜é€ŸåŒ–ã—ã€æˆæœã‚’ä¸Šã’ãŸã®ã‹ã€ã‚’å®Ÿè·µçš„ã«ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚

---

# ğŸ§¬ Codon å®Ÿè·µã‚¬ã‚¤ãƒ‰ â€” Pythonã‚’è¶…ãˆã‚‹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©å‹é«˜é€ŸåŒ–ã®é“

> **Author:** iichiro suzuki
> **Project:** Python / Codon æœ€é©åŒ–ã«ã‚ˆã‚‹ N-Queens ã‚½ãƒ«ãƒãƒ¼é–‹ç™ºè¨˜éŒ²
> **Environment:** Fedora 42 / Amazon Linux 2023 / LLVM / PyPy / CUDA
> **Keywords:** Codon, LLVM, NVPTX, Constellations, Bitboard, Optimization

---

## ğŸš€ ã¯ã˜ã‚ã«

Python ã¯ç¾ã—ãæŸ”è»Ÿã§ã™ãŒã€æ•°å€¤è¨ˆç®—ã‚„å†å¸°å‡¦ç†ã®ä¸–ç•Œã§ã¯é™ç•ŒãŒã‚ã‚Šã¾ã™ã€‚
**Codon** ã¯ã€Python ã®æ§‹æ–‡ã‚’ãã®ã¾ã¾ã« **LLVM ãƒ™ãƒ¼ã‚¹ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æœ€é©åŒ–** ã‚’å®Ÿç¾ã™ã‚‹æ–°ä¸–ä»£ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§ã™ã€‚

ç§ã¯ ã€N-Queens å•é¡Œã¨ã„ã†æ¥µç«¯ã«å†å¸°çš„ãƒ»çµ„åˆã›çš„ãªå•é¡Œã‚’é¡Œæã«ã€
**Python â†’ Codon â†’ GPUï¼ˆCUDAï¼‰** ã¨ã„ã†é“ã‚’å®Ÿè·µçš„ã«æ­©ã¿ã¾ã—ãŸã€‚
ã“ã“ã§ã¯ã€ãã®éç¨‹ã§å¾—ã‚‰ã‚ŒãŸçŸ¥è¦‹ãƒ»æ§‹ç¯‰æ³•ãƒ»ãƒã‚¦ãƒã‚¦ãƒ»é›£æ‰€ãƒ»å“²å­¦ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚

> [!TIP]
> çµè«–ã‹ã‚‰è¨€ã„ã¾ã™ã¨ã€GPU/CUDA N-Queensã¨ã€CPU/Python Codon N-Queensã®è¨ˆæ¸¬æ™‚é–“ã¯ã€CPUã§ã‚ã‚ŠãªãŒã‚‰GPU/CUDAã«ã‚„ã‚„ã‚‚ã™ã‚Œã°è¿½ã„ã¤ãã¨ã„ã†äº‹ã¨ãªã‚Šã¾ã—ãŸã€‚

GPU/CUDA N-Queens
``` bash
GPU/CUDA
10Bit_CUDA/01CUDA_Bit_Symmetry.cu
 N:            Total           Unique         hh:mm:ss.ms
19:       4968057848        621012754     000:00:00:13.80
20:      39029188884       4878666808     000:00:02:02.52
21:     314666222712      39333324973     000:00:18:46.52
22:    2691008701644     336376244042     000:03:00:22.54
23:   24233937684440    3029242658210     001:06:03:49.29
```

Python/Codon N-Queens
``` bash
amazon AWS m4.16xlarge x 1
$ codon build -release 15Py_constellations_optimize_codon.py && ./15Py_constellations_optimize_codon
 N:            Total           Unique         hh:mm:ss.ms
19:       4968057848                0          0:00:22.04
20:      39029188884                0          0:02:52.43
21:     314666222712                0          0:24:25.55
22:    2691008701644                0          3:29:33.97
23:   24233937684440                0   1  day,8:12:58.97
```

 ---

## ğŸ§© ç¬¬1ç« ï¼šCodonã¨ã¯ä½•ã‹

Codon ã¯ **LLVM ã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«æŒã¤ AOTï¼ˆAhead-of-Timeï¼‰Python ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©** ã§ã™ã€‚
ä»¥ä¸‹ã®ç‚¹ã§ä»–ã®æ‰‹æ³•ï¼ˆPyPy, Cythonï¼‰ã¨ã¯ç•°ãªã‚Šã¾ã™ã€‚

| æ‰‹æ³•        | ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ–¹å¼       | Pythonäº’æ›æ€§  | ä¸»ãªç‰¹å¾´           |
| --------- | ------------- | ---------- | -------------- |
| CPython   | ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿        | 100%       | æŸ”è»Ÿã ãŒé…ã„         |
| PyPy      | JIT           | ã»ã¼100%     | å®Ÿè¡Œæ™‚æœ€é©åŒ–         |
| **Codon** | **AOTï¼ˆLLVMï¼‰** | **90ã€œ95%** | é™çš„å‹+é«˜é€Ÿãƒã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‰ |

Codon ã®æ€æƒ³ã¯ã€ŒPythonã®æ›¸ãã‚„ã™ã•ã€ã¨ã€ŒCã®é€Ÿã•ã€ã‚’ä¸¡ç«‹ã™ã‚‹ã“ã¨ã€‚
**Pythonã®æ–‡æ³•ã®ã¾ã¾ã€ãƒã‚¤ãƒ†ã‚£ãƒ–å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã§ãã‚‹** ã®ãŒæœ€å¤§ã®é­…åŠ›ã§ã™ã€‚


### â— Codon ã®æ¦‚è¦

Codon ã¯ã€Python ã®æ§‹æ–‡ã‚’ãã®ã¾ã¾ç¶­æŒã—ãªãŒã‚‰ LLVM ã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ç”¨ã„ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹æ–°ä¸–ä»£ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§ã™ã€‚
Python ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ **é™çš„å‹è§£æ â†’ LLVM IR â†’ ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‰** ã«å¤‰æ›ã—ã€JIT ã§ã¯ãªãäº‹å‰æœ€é©åŒ–ï¼ˆAOTï¼‰ã‚’è¡Œã†ç‚¹ãŒç‰¹å¾´ã§ã™ã€‚

---

### â— ã€ŒPython ã‚’ LLVM ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã€ã¨ã„ã†æ€æƒ³

Codon ã®æ€æƒ³ã¯ã€ŒPython ã®æ›¸ãã‚„ã™ã•ã‚’ä¿ã£ãŸã¾ã¾ã€C/C++ ã®é€Ÿåº¦ã‚’å¾—ã‚‹ã€ã“ã¨ã§ã™ã€‚
ã¤ã¾ã‚Š â€œæ›¸ãã¨ãã¯ Pythonã€å‹•ã‹ã™ã¨ãã¯ãƒã‚·ãƒ³ã‚³ãƒ¼ãƒ‰â€ ã¨ã„ã†ç†æƒ³çš„ãªå½¢ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€ç ”ç©¶é–‹ç™ºã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãã®ã¾ã¾é«˜é€Ÿãªæœ¬ç•ªã‚³ãƒ¼ãƒ‰ã«ç§»è¡Œã§ãã¾ã™ã€‚

---

### â— JIT ã¨ AOTï¼ˆAhead of Timeï¼‰ã®é•ã„

JITï¼ˆJust-In-Timeï¼‰ã¯å®Ÿè¡Œæ™‚ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’è¡Œã†æ–¹å¼ã§ã€PyPy ãªã©ãŒä»£è¡¨ä¾‹ã§ã™ã€‚
AOTï¼ˆAhead-of-Timeï¼‰ã¯å®Ÿè¡Œå‰ã«å®Œå…¨ã«ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‰ã¸å¤‰æ›ã™ã‚‹æ–¹å¼ã§ã€Codon ã¯ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚
AOT ã¯èµ·å‹•æ™‚é–“ã‚’çŸ­ç¸®ã—ã€CPU ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ€é©åŒ–ãŒäº‹å‰ã«è¡Œãˆã‚‹ãŸã‚ã€å®‰å®šã—ãŸé«˜é€Ÿæ€§èƒ½ã‚’ç™ºæ®ã—ã¾ã™ã€‚

---

### â— PyPy ã‚„ Cython ã¨ã®ä½ç½®ã¥ã‘ã®æ¯”è¼ƒ

| å®Ÿè£…        | ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ–¹å¼      | Pythonäº’æ›æ€§     | ç‰¹å¾´                  |
| --------- | ------------ | ------------- | ------------------- |
| CPython   | ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿       | â—             | æ¨™æº–å®Ÿè£…ãƒ»å‹•çš„å‹            |
| PyPy      | JIT          | â—             | å®Ÿè¡Œæ™‚æœ€é©åŒ–ãƒ»æŸ”è»Ÿ           |
| Cython    | ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«      | â—¯             | Cæ‹¡å¼µæ§‹æ–‡ãŒå¿…è¦            |
| **Codon** | **AOTã‚³ãƒ³ãƒ‘ã‚¤ãƒ«** | **â—ï¼ˆã»ã¼100%ï¼‰** | **LLVMã«ã‚ˆã‚‹å®Œå…¨ãƒã‚¤ãƒ†ã‚£ãƒ–åŒ–** |

Codon ã¯ **Python ã®æ§‹æ–‡ã‚’ç¶­æŒã—ãŸã¾ã¾ C++ ã«åŒ¹æ•µã™ã‚‹é€Ÿåº¦** ã‚’å®Ÿç¾ã§ãã‚‹ç‚¹ã§ä»–ã¨ä¸€ç·šã‚’ç”»ã—ã¾ã™ã€‚

---

### â— ãªãœ Codon ã¯é«˜é€Ÿãªã®ã‹ï¼ˆLLVM IR â†’ ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‰ï¼‰

Codon ã¯ã€ã™ã¹ã¦ã® Python ã‚³ãƒ¼ãƒ‰ã‚’ä¸­é–“è¡¨ç¾ï¼ˆLLVM IRï¼‰ã«å¤‰æ›ã—ã€
LLVM ã®æœ€é©åŒ–ãƒ‘ã‚¹ï¼ˆã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å±•é–‹ãƒ»ãƒ«ãƒ¼ãƒ—å±•é–‹ãƒ»å…±é€šå¼é™¤å»ãªã©ï¼‰ã‚’é©ç”¨ã—ã¾ã™ã€‚
ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã«ã‚ˆã‚Šã€CPython ã®ä»®æƒ³ãƒã‚·ãƒ³å‘½ä»¤ã‚’å®Œå…¨ã«æ’é™¤ã—ã€CPU ãŒç›´æ¥å®Ÿè¡Œã§ãã‚‹ãƒã‚¤ãƒŠãƒªã‚’ç”Ÿæˆã—ã¾ã™ã€‚

---

### â— Python æ§‹æ–‡ã¨ã®äº’æ›æ€§ãƒ»åˆ¶é™

Codon ã¯ Python 3.10+ æ§‹æ–‡ã¨é«˜ã„äº’æ›æ€§ã‚’æŒã¡ã¾ã™ãŒã€å‹•çš„å‹ä»˜ã‘ãƒ»ä¾‹å¤–ãƒ»ä¸€éƒ¨ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯æœªå¯¾å¿œã§ã™ã€‚
ç‰¹ã« `import numpy` ã‚„ `try/except`ã€`async` ãªã©ã¯åˆ¶é™ãŒã‚ã‚Šã¾ã™ã€‚
ä¸€æ–¹ã§ã€`int`, `List[int]`, `Dict[str,int]` ãªã©ã®å‹æ³¨é‡ˆã‚’ä½¿ã†ã“ã¨ã§ã€é™çš„è§£æã¨æœ€é©åŒ–ãŒå®Œå…¨ã«æ©Ÿèƒ½ã—ã¾ã™ã€‚


> ğŸ’¡ **ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆã‚¢ãƒ‰ãƒã‚¤ã‚¹**
> Codon ã¯ã€ŒPythonã®æ–‡æ³•ã‚’C++ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã®ä¸–ç•Œã«æŒã¡è¾¼ã‚“ã è¨€èªã€ã§ã™ã€‚
> Pythonçš„ãªæŸ”è»Ÿã•ã‚’æ®‹ã—ã¤ã¤ã€é™çš„è§£æã‚’â€œå‘³æ–¹ã«ã¤ã‘ã‚‹â€æ„è­˜ã§æ›¸ãã¨ä¸€æ°—ã«é€Ÿããªã‚Šã¾ã™ã€‚

---

## âš¡ ç¬¬2ç« ï¼šãªãœCodonãªã®ã‹
### â— Python ã®æŸ”è»Ÿã•ã¨é™ç•Œ

Python ã¯è¡¨ç¾åŠ›ãŒé«˜ãé–‹ç™ºåŠ¹ç‡ã«å„ªã‚Œã¦ã„ã¾ã™ãŒã€å®Ÿè¡Œé€Ÿåº¦ãƒ»å†å¸°æ·±åº¦ãƒ»å‹åˆ¤å®šã«å¤§ããªã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãŒã‚ã‚Šã¾ã™ã€‚
Codon ã¯ã“ã‚Œã‚‰ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã‚’ LLVM ã®é™çš„æœ€é©åŒ–ã§å–ã‚Šé™¤ãã€**Python ã®ã¾ã¾ â€œã‚³ãƒ³ãƒ‘ã‚¤ãƒ«è¨€èªç´šã®é€Ÿã•â€** ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

> ğŸ’¡ **ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆã‚¢ãƒ‰ãƒã‚¤ã‚¹**
> Codonã®é«˜é€ŸåŒ–ã¯ã€Œå‹ã®å›ºå®šã€ã‹ã‚‰å§‹ã¾ã‚Šã¾ã™ã€‚
> è¿·ã£ãŸã‚‰ã¾ãš `int` ã‚„ `List[int]` ã‚’æ˜ç¤ºã—ã€å¤‰æ•°ãŒâ€œæºã‚Œãªã„â€çŠ¶æ…‹ã‚’ä½œã‚‹ã“ã¨ãŒæœ€åˆã®ä¸€æ­©ã§ã™ã€‚

---

### â— Codon ã«ã‚ˆã‚‹é«˜é€ŸåŒ–ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

Codon ã¯å®Ÿè¡Œå‰ã«å‹ã‚’ç¢ºå®šã•ã›ã€CPUå‘½ä»¤ãƒ¬ãƒ™ãƒ«ã§æœ€é©åŒ–ã•ã‚ŒãŸãƒã‚¤ãƒ†ã‚£ãƒ–ãƒã‚¤ãƒŠãƒªã‚’ç”Ÿæˆã—ã¾ã™ã€‚
`int`, `float`, `List[int]` ã¨ã„ã£ãŸæ˜ç¤ºçš„ãªå‹æ³¨é‡ˆã‚’åŠ ãˆã‚‹ã ã‘ã§ã€æ•°ç™¾å€ã®é€Ÿåº¦å‘ä¸ŠãŒè¦‹è¾¼ã‚ã¾ã™ã€‚
å‹•çš„ãªæ§‹é€ ä½“ã‚’é¿ã‘ã‚‹ã“ã¨ã§ã€LLVM ã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å±•é–‹ã¨ãƒ¬ã‚¸ã‚¹ã‚¿å‰²ã‚Šå½“ã¦ãŒæœ€å¤§åŒ–ã•ã‚Œã¾ã™ã€‚

---

### â— â€œæ›¸ãã‚„ã™ã•ã‚’æ¨ã¦ãšã«é€Ÿãã™ã‚‹â€

C++ ã‚„ Rust ã«æ¯”ã¹ã€Codon ã¯ **Python ã®æ–‡æ³•ã‚’ã»ã¼ãã®ã¾ã¾ä½¿ãˆã‚‹** ã®ãŒæœ€å¤§ã®åˆ©ç‚¹ã§ã™ã€‚
æ©Ÿæ¢°å­¦ç¿’ãƒ»ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å®Ÿé¨“ãƒ»æ•°å€¤æœ€é©åŒ–ãªã©ã€è©¦è¡ŒéŒ¯èª¤ã‚’é«˜é€Ÿã«å›ã™ç ”ç©¶ç¾å ´ã«ç‰¹ã«æœ‰åŠ¹ã§ã™ã€‚

---

> [!TIP]
> Codonã¯ã€ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ãªã—ã§ Pythonã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–ãªãƒã‚·ãƒ³èªã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹é«˜æ€§èƒ½ãªPythonã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§ã™ã€‚ Codonã‚’ä½¿ã†ã¨ã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰ã§ã‚‚ååˆ†ãªé«˜é€ŸåŒ–ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ãŒã€ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãŸã‚ã€æ›´ãªã‚‹é«˜é€ŸåŒ–ã‚‚å›³ã‚Œã¾ã™ã€‚



---

## ğŸ§± ç¬¬3ç« ï¼šCodonç’°å¢ƒæ§‹ç¯‰ï¼ˆFedora / Amazon Linuxï¼‰

### â— Linux/macã§ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
``` bash
/bin/bash -c "$(curl -fsSL https://exaloop.io/install.sh)"
```

> [!TIP]
> OSãŒLinux (x86_64) ã‹ MacOS (x86_64 ã¾ãŸã¯ arm64) ã§ã‚ã‚Œã°ã€å…¬å¼ã‹ã‚‰ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ã®ãƒã‚¤ãƒŠãƒªãŒé…å¸ƒã•ã‚Œã¦ã„ã‚‹ã®ã§ã€1ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

---

### â— ãƒ“ãƒ«ãƒ‰ç’°å¢ƒï¼ˆFedora / Amazon Linuxï¼‰

Codon ã¯ CMake / LLVM ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã€ãƒ“ãƒ«ãƒ‰æ™‚ã«ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ•´å‚™ãŒé‡è¦ã§ã™ã€‚
ä»¥ä¸‹ã®ç’°å¢ƒæ§‹ç¯‰ã§å®‰å®šå‹•ä½œã‚’ç¢ºèªã—ã¦ã„ã¾ã™ï¼š

``` bash
dnf install cmake ninja-build fmt-devel libomp-devel toml++ fast-float semver-devel
```

---


### â— ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

```bash
git clone https://github.com/exaloop/codon
cd codon
mkdir build && cd build
cmake .. -DCMAKE_BUILD_TYPE=Release
make -j$(nproc)
sudo make install
```

---


### â— å®Ÿè¡Œç¢ºèª

```bash
$ codon run -release hello.py
Hello Codon!
```

Fedora42 / Amazon Linux 2023 ã®åŒæ–¹ã§å†ç¾å¯èƒ½ã§ã—ãŸã€‚


---

> ğŸ’¡ **ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆã‚¢ãƒ‰ãƒã‚¤ã‚¹**
> ãƒ“ãƒ«ãƒ‰æ™‚ã¯ `ninja -v` ã‚„ `make VERBOSE=1` ã§å†…éƒ¨ãƒ­ã‚°ã‚’å‡ºã™ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚’æ—©æœŸç™ºè¦‹ã§ãã¾ã™ã€‚
> ç‰¹ã« `libcodonrt.so` ã®å ´æ‰€ã¯ç’°å¢ƒã”ã¨ã«ç•°ãªã‚‹ãŸã‚ã€`nm -D` ã§ç¢ºèªã—ã¦ãŠãã®ãŒãŠã™ã™ã‚ã§ã™ã€‚


## ğŸ§  ç¬¬4ç« ï¼šCodonã®é«˜é€ŸåŒ–åŸç†ã¨åŸºæœ¬æ§‹æ–‡

### â— é™çš„å‹ã«ã‚ˆã‚‹æœ€é©åŒ–
Codon ã¯å‹ã‚’å›ºå®šã™ã‚‹ã“ã¨ã§ã€å‹•çš„å‹åˆ¤å®šã‚’ã™ã¹ã¦æ’é™¤ã—ã¾ã™ã€‚
> [!TIP]
> Codon ã¯å‹•çš„å‹ã‚’å®Œå…¨ã«æ’é™¤ã—ã€**å‹ãŒç¢ºå®šã—ãŸæ™‚ç‚¹ã§LLVMãŒæœ€é©åŒ–** ã‚’è¡Œã„ã¾ã™ã€‚
Python ã®ã‚ˆã†ãªã€Œã©ã®å‹ãŒæ¥ã‚‹ã‹ã‚ã‹ã‚‰ãªã„ã€é–¢æ•°å‘¼ã³å‡ºã—ã¯ä¸€åˆ‡ç™ºç”Ÿã—ã¾ã›ã‚“ã€‚


---


### åŸºæœ¬çš„ãªæ›¸ãæ–¹

```python
from typing import List

def fib(n: int) -> int:
    if n < 2:
        return n
    return fib(n - 1) + fib(n - 2)

print(fib(40))
```

> [!TIP]
> åŒã˜ã‚³ãƒ¼ãƒ‰ã§ã‚‚ã€Codonã§ã¯ `n` ãŒintã§å›ºå®šã•ã‚Œã‚‹ãŸã‚ã€**åˆ†å²äºˆæ¸¬ãƒ»å†å¸°å±•é–‹** ãŒè¡Œã‚ã‚Œã€æ•°åå€é«˜é€Ÿã«å‹•ä½œã—ã¾ã™ã€‚


> ğŸ’¡ **ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆã‚¢ãƒ‰ãƒã‚¤ã‚¹**
> Codonã§ã¯ã€Œå‹ã‚’æ±ºã‚ãŸç¬é–“ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒå§‹ã¾ã‚‹ã€ã¨è€ƒãˆã¾ã—ã‚‡ã†ã€‚
> å‹ãƒ’ãƒ³ãƒˆã¯å˜ãªã‚‹ã‚³ãƒ¡ãƒ³ãƒˆã§ã¯ãªãã€**LLVMæœ€é©åŒ–ã®ãƒˆãƒªã‚¬ãƒ¼** ã§ã™ã€‚




### æœ€é©åŒ–ã®ãƒã‚¤ãƒ³ãƒˆ

* å‹ãƒ’ãƒ³ãƒˆã‚’**ã™ã¹ã¦æ˜ç¤º**ã™ã‚‹ (`int`, `List[int]`, `Dict[str,int]`ãªã©)
* ä¾‹å¤– (`try/except`) ã‚’ä½¿ã‚ãªã„
* ãƒ«ãƒ¼ãƒ—å¤‰æ•°ãƒ»å†å¸°å‘¼ã³å‡ºã—ã‚’å±€æ‰€å¤‰æ•°åŒ–
* ãƒ«ãƒ¼ãƒ—å¤–ã§ãƒ¡ãƒ¢ãƒªã‚’ç¢ºä¿ã—å†åˆ©ç”¨
* `while` ãƒ«ãƒ¼ãƒ—ã‚’å¤šç”¨ã—ã€å†å¸°ã‚’éšå±¤çš„ã«ç½®ãæ›ãˆã‚‹
* ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã‚„å‹•çš„ import ã‚’é¿ã‘ã‚‹
* é–¢æ•°ã‚’å°ã•ãåˆ†å‰²ã—ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å˜ä½ã‚’æ˜ç¢ºåŒ–
* ãƒ‡ãƒãƒƒã‚°ã«ã¯ `codon run -debug` ã‚’æ´»ç”¨
* `for` ãƒ«ãƒ¼ãƒ—ã¨ `while` ãƒ«ãƒ¼ãƒ—ã®æœ€é©åŒ–æŒ™å‹•
* é…åˆ—ãƒ»è¾æ›¸ã®é™çš„ç¢ºä¿
* `@codon.jit`, `@codon.inline` ãªã©ã®ä½¿ç”¨å¯å¦ã¨å®Ÿé¨“çµæœ
* Python ã¨ Codon ã§ã®æ•´æ•°ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼æŒ™å‹•ã®é•ã„
* `bit` / `mask` æ¼”ç®—ã§ã®é«˜é€ŸåŒ–ä¾‹

---

## â™Ÿï¸ ç¬¬5ç« ï¼šN-Queensã‚½ãƒ«ãƒãƒ¼ã®Codonå®Ÿè£…

ç§ã¯ N-Queens å•é¡Œã‚’ Codon ã§å®Œå…¨å®Ÿè£…ã—ã€
**Python æ¯” ç´„8ã€œ15å€** ã®é«˜é€ŸåŒ–ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚

* bitæ¼”ç®—ã«ã‚ˆã‚‹ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚¯æœ€é©åŒ–
* å¯¾ç§°æ€§é™¤å»ï¼ˆmirror / rotation / canonicalï¼‰
* `constellation` æ‰‹æ³•ã®å°å…¥ï¼ˆéƒ¨åˆ†ç›¤é¢ãƒ—ãƒªã‚»ãƒƒãƒˆï¼‰
* `blocked_next`, `next_free`, `board_mask` ã®æ¦‚å¿µ
* é–¢æ•°åˆ†å‰²ã¨ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ–
* é…åˆ—ã‚¢ã‚¯ã‚»ã‚¹ã‚’æ•´æ•°ã«ç½®æ›
* `List[Dict[str,int]]` ã‚’ `struct` ç›¸å½“è¡¨ç¾ã«å¤‰æ›
* `COUNT2/4/8` ã®åˆ†é›¢ã«ã‚ˆã‚‹å†å¸°æœ¨ã®ç°¡ç•¥åŒ–
* Codon ç‰ˆã§ã® `SQ_core_unified()` å®Ÿè£…ã®å…¨ä½“åƒ
* Codon ã«ã‚ˆã‚‹é€Ÿåº¦å‘ä¸Šï¼ˆPython æ¯” Ã—8ã€œÃ—15ï¼‰


> ğŸ’¡ **ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆã‚¢ãƒ‰ãƒã‚¤ã‚¹**
> Codonæœ€é©åŒ–ã®çœŸé«„ã¯ã€Œå†å¸°ã®å®šå¼åŒ–ã€ã¨ã€Œæåˆˆã‚Šã®å±€æ‰€åŒ–ã€ã§ã™ã€‚
> Pythonã§å‹•ã„ãŸæ¢ç´¢é–¢æ•°ã‚’ã€**å¤‰æ•°ã‚’æ¸›ã‚‰ã—ã¦æ›¸ãç›´ã™ã ã‘ã§æ•°å€é«˜é€ŸåŒ–** ã§ãã¾ã™ã€‚


---

### 5.1 ä¸»ãªæœ€é©åŒ–æ‰‹æ³•

* **ãƒ“ãƒƒãƒˆãƒœãƒ¼ãƒ‰** ã«ã‚ˆã‚‹è¡çªåˆ¤å®š
* **å¯¾ç§°æ€§é™¤å»**ï¼ˆmirror / rotationï¼‰
* **Constellationæ³•**ï¼ˆéƒ¨åˆ†ç›¤é¢ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ã‚ˆã‚‹åˆ†å‰²æ¢ç´¢ï¼‰
* **blocked_next**ï¼**next_free** ã«ã‚ˆã‚‹æ—©æœŸæåˆˆã‚Š
* **Zobrist Hash** ã«ã‚ˆã‚‹æ¢ç´¢é‡è¤‡æ’é™¤
* **canonicalåŒ–ãƒã‚§ãƒƒã‚¯** ã«ã‚ˆã‚‹ä¸€æ„è§£æŠ½å‡º

---

### 5.2 ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµæœï¼ˆFedora42 / Codon v0.17ï¼‰

N-Queens Nã®è¨ˆæ¸¬
| N  | Total | Unique |  Python  |  pypy  | Codon  | GPU/CUDA |
| -- | ------- | ------ | -------- | ------ | ------ | -------- |
| 8  | 92      | 12     |  00.126s | 0.169s | 0.001s |   0.01   |
| 13 | 73712   | 9233   |  00.355s | 0.825s | 0.005s |   0.04   |
| 15 | 2279184 | 285053 |  09.006s | 3.841s | 0.035s |   0.07   |
| 17 |14772512 |11977939|1:07.235s |13.367s | 0.436s |   0.26   |

---

è¨€èªã«ã‚ˆã‚‹é€Ÿåº¦æ¯”è¼ƒ
| åå‰ | å‡¦ç†æ™‚é–“ (s) | é€Ÿåº¦ (CPython æ¯”) | é †ä½ |
|------|---------------|-------------------|------|
| Python | 8.40 | 1.00 | 8 |
| PyPy | 2.08 | 4.03 | 7 |
| Cython | 0.373 | 22.5 | 6 |
| Numba | 0.155 | 54.3 | 5 |
| C++ | 0.138 | 60.7 | 4 |
| Nim | 0.0359 | 234 | 3 |
| MojoğŸ”¥ | 0.0289 | 291 | 2 |
| Codon | 0.0281 | 299 | 1 |


ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«ã‚ˆã‚‹é€Ÿåº¦æ¯”è¼ƒ
| å®Ÿè¡Œæ–¹æ³• | å‡¦ç†æ™‚é–“ï¼ˆç§’ï¼‰ |
|-----------|------------------------------|
| é€šå¸¸ã®Python (Liståˆ©ç”¨) | 9.71 |
| Codon (Liståˆ©ç”¨) | 1.04 |
| Codon (é™çš„é…åˆ—åˆ©ç”¨) | 0.27 |
| Codon (Liståˆ©ç”¨) æœ€é©åŒ–ã‚ã‚Š | 0.05 |
| Codon (é™çš„é…åˆ—åˆ©ç”¨) æœ€é©åŒ–ã‚ã‚Š | 0.04 |

> [!TIP]
> Codonã¯Pythonã‚³ãƒ¼ãƒ‰ã‚’é«˜é€ŸåŒ–ã™ã‚‹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§ã€é€šå¸¸ã®Pythonã¨æ¯”è¼ƒã—ã¦10å€ã‹ã‚‰100å€ã€C/C++ã«åŒ¹æ•µã™ã‚‹é€Ÿåº¦ã‚’å®Ÿç¾ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€å®Ÿè¡Œå‰ã«å‹ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ã€ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒã‚·ãƒ³ã‚³ãƒ¼ãƒ‰ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã“ã¨ã§ã€Pythonã®å®Ÿè¡Œæ™‚ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚’å›é¿ã™ã‚‹ãŸã‚ã§ã™ã€‚ã¾ãŸã€ä¸¦åˆ—å‡¦ç†ã«ã‚‚å¯¾å¿œã—ã€ã•ã‚‰ãªã‚‹é€Ÿåº¦å‘ä¸ŠãŒæœŸå¾…ã§ãã¾ã™



---

## ğŸ”© ç¬¬6ç« ï¼šCodon Ã— LLVM Ã— CUDA ã¸ã®æŒ‘æˆ¦

Codon ã«ã¯ `NVPTX` ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆCUDAã‚³ãƒ¼ãƒ‰ç”Ÿæˆï¼‰ãŒå­˜åœ¨ã—ã¾ã™ãŒã€
ç¾è¡Œï¼ˆ2025æ™‚ç‚¹ï¼‰ã§ã¯æœªå®Œæˆã®éƒ¨åˆ†ãŒã‚ã‚Šã¾ã™ã€‚

> ğŸ’¡ **ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆã‚¢ãƒ‰ãƒã‚¤ã‚¹**
> Codonã¯ã¾ã GPUçµ±åˆé€”ä¸Šã§ã™ãŒã€`-libdevice` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å‹•ä½œåŸç†ã‚’ç†è§£ã—ã¦ãŠãã¨å¾Œã«å½¹ç«‹ã¡ã¾ã™ã€‚
> ã€ŒCPUâ†’GPUã®é·ç§»ã€ã¯LLVM IRã‚’å…±æœ‰ã§ãã‚‹ã¨ã„ã†ç™ºæƒ³ã§è¦‹ã‚‹ã¨è…‘ã«è½ã¡ã¾ã™ã€‚

### å®Ÿé¨“ä¾‹

```bash
LIBDEVICE=/usr/local/cuda/nvvm/libdevice/libdevice.10.bc
codon run -release -libdevice "$LIBDEVICE" codonCupyTest.py
```

```python
import gpu

@gpu.kernel
def hello(a, b, c):
    i = gpu.thread.x
    c[i] = a[i] + b[i]
```

çµæœï¼šCPUç‰ˆã¯å‹•ä½œã€GPUå‘¼ã³å‡ºã—ã¯ `seq_nvptx_memcpy_h2d/d2h` æ¬ è½ã«ã‚ˆã‚Šæœªå®Œã€‚
â†’ Codon ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã® NVPTX ã‚µãƒãƒ¼ãƒˆå†æ§‹ç¯‰ãŒä»Šå¾Œã®èª²é¡Œã€‚

* Codon ã® LLVM ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è§£æ
* NVPTX ç”Ÿæˆã«å¿…è¦ãª `seq_nvptx_*` ã‚·ãƒ³ãƒœãƒ«ç¾¤
* `codon run -release -libdevice` å®Ÿé¨“çµæœ
* GPU ã‚«ãƒ¼ãƒãƒ«ä¿®æ­£ä¾‹ï¼ˆ`@gpu.kernel` ã®å‹•ä½œç¢ºèªï¼‰
* å°†æ¥ã® GPU çµ±åˆã®æ–¹å‘æ€§
* Python â†” Codon â†” CUDA ã®é€£æºãƒ¢ãƒ‡ãƒ«æ§‹æƒ³å›³

> [!TIP]
> Codon ã¯ LLVM ã® NVPTX ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ GPU å®Ÿè¡ŒãŒç†è«–çš„ã«å¯èƒ½ã§ã™ã€‚
ã—ã‹ã—ç¾æ™‚ç‚¹ã§ã¯ seq_nvptx_memcpy_h2d/d2h ãªã©ä¸€éƒ¨ã‚·ãƒ³ãƒœãƒ«ãŒæœªå®Ÿè£…ã§ã€GPUç‰ˆã¯å®Ÿé¨“æ®µéš ã«ã‚ã‚Šã¾ã™ã€‚

---

## ğŸ§­ ç¬¬7ç« ï¼šã§ããŸã“ã¨ï¼ã§ããªã‹ã£ãŸã“ã¨

| é …ç›®                   | çŠ¶æ³                    | å‚™è€ƒ                 |
| -------------------- | --------------------- | ------------------ |
| Codon ãƒ“ãƒ«ãƒ‰            | âœ… å®Œäº†ï¼ˆFedora / AL2023ï¼‰ | å†ç¾æ€§ã‚ã‚Š              |
| N-Queens CPUç‰ˆ        | âœ… å®Œæˆï¼é«˜é€ŸåŒ–æˆåŠŸ            | PyPyæ¯” Ã—10ã€œ15       |
| GPUç‰ˆ Codon å®Ÿé¨“        | âš ï¸ æœªå®Œ                 | NVPTX ã‚·ãƒ³ãƒœãƒ«æ¬ è½       |
| LLVM IR è§£æ           | âœ… æˆåŠŸ                  | `opt` / `llc` ã§ç¢ºèª  |
| ä¸¦åˆ—åŒ–ï¼ˆmultiprocessingï¼‰ | âœ… å®Ÿè£…æ¸ˆ                 | Codonæ¨™æº–ä¸¦åˆ—åŒ–ã¯æœªæ­è¼‰     |
| Canonicalåˆ¤å®š          | âœ… å®Ÿè£…æ¸ˆ                 | `jasmin()` ã«ã‚ˆã‚‹é‡è¤‡é™¤å» |
| NVRTC çµ±åˆ             | âš ï¸ è©¦é¨“æ®µéš               | CUDAçµ„è¾¼ã¿æœªå®‰å®š         |

---

> ğŸ’¡ **ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆã‚¢ãƒ‰ãƒã‚¤ã‚¹**
> â€œã§ããªã‹ã£ãŸã“ã¨â€ ã®è¨˜éŒ²ã“ãæ¬¡ã®æœ€é©åŒ–ã®ç³§ã§ã™ã€‚
> Codonã¯ã¾ã é€²åŒ–ä¸­ã®ãŸã‚ã€æœªå¯¾å¿œæ©Ÿèƒ½ã‚’ãƒ¡ãƒ¢ã—ã¦ãŠãã¨ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ™‚ã«çœŸã£å…ˆã«æ´»ãã¦ãã¾ã™ã€‚



## ğŸ”§ ç¬¬8ç« ï¼šæ§‹ç¯‰ãƒ»é–‹ç™ºãƒã‚¦ãƒã‚¦

* Codon ãƒ“ãƒ«ãƒ‰æ™‚ã« `ninja -v` ã§è©³ç´°ç¢ºèª
* `libcodonrt.so` ã®ä½ç½®ã‚’ `nm -D` ã§ç¢ºèª
* Pythonã‚³ãƒ¼ãƒ‰ã‚’ã€Œæ®µéšçš„ã« Codon ã«ç½®ãæ›ãˆã‚‹ã€æ–¹é‡ãŒæœ‰åŠ¹
* å‹ãƒ’ãƒ³ãƒˆã‚’çœç•¥ã—ãªã„
* å†å¸°â†’åå¾©åŒ–ã‚’æ„è­˜
* ä¾‹å¤–ã‚ˆã‚Šæˆ»ã‚Šå€¤åˆ¶å¾¡
* å¤§è¦æ¨¡æ¢ç´¢ã§ã¯ `print` ãƒ‡ãƒãƒƒã‚°ã‚’é¿ã‘ã€çµæœã ã‘å‡ºåŠ›
* `fmt` / `toml` / `semver` / `fast_float` ã®çµ„ã¿è¾¼ã¿ä¾å­˜
* `type: ignore` ã‚’å¤–ã™
* è¨ˆç®—ãƒ«ãƒ¼ãƒ—å†…ã§ã¯ã€Œä¾‹å¤–ç™ºç”Ÿã€ã‚’çµ¶å¯¾ã«é¿ã‘ã‚‹
* printãƒ‡ãƒãƒƒã‚°æ™‚ã® `str(dt)[:-3]` ã®ã‚ˆã†ãªæ›¸å¼çŸ­ç¸®

> ğŸ’¡ **ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆã‚¢ãƒ‰ãƒã‚¤ã‚¹**
> Codonã§ã¯ã€Œæ›¸ãæ–¹ã‚’æ•´ãˆã‚‹ã€ã“ã¨ãŒæœ€å¤§ã®æœ€é©åŒ–ã§ã™ã€‚
> ãƒ«ãƒ¼ãƒ—å¤‰æ•°ã‚’å†åˆ©ç”¨ã—ãªã„ã€é–¢æ•°ã®å¼•æ•°ã‚’å›ºå®šå‹ã«ã™ã‚‹â€”â€”ã“ã‚Œã ã‘ã§å†…éƒ¨çš„ã«LLVMæœ€é©åŒ–ãŒé€²ã¿ã¾ã™ã€‚

---

## ğŸ§® ç¬¬9ç« ï¼šCodonã§å­¦ã‚“ã è¨­è¨ˆæ€æƒ³

> ã€ŒCodonã«ç§»æ¤ã§ãã‚‹Pythonã‚³ãƒ¼ãƒ‰ã€ã‚’æœ€åˆã‹ã‚‰æ›¸ãã€‚

* å‹•çš„å‹ã‚’é¿ã‘ã€**å¸¸ã«é™çš„æ€è€ƒã§æ›¸ã**
* ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä¾å­˜ã‚’æ¸›ã‚‰ã—ã€**æ¨™æº–æ¼”ç®—ã ã‘ã§å®Œçµ**
* å†å¸°æ·±åº¦ã‚’æ¸›ã‚‰ã—ã€**æ˜ç¤ºçš„ã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç†**
* ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚’ä½¿ã‚ãšã€æ§‹é€ ä½“ã‚„ã‚¯ãƒ©ã‚¹ã§å—ã‘æ¸¡ã™
* `List` ã‚ˆã‚Šå›ºå®šé•·é…åˆ—ã‚’å„ªå…ˆ
* ã€ŒCPUã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã€ãªé…ç½®ã‚’æ„è­˜ã™ã‚‹
* Python ã‚³ãƒ¼ãƒ‰ã‚’ã€Œå¾Œã‹ã‚‰ Codon ã«ç½®ãæ›ãˆã‚‰ã‚Œã‚‹ã€è¨­è¨ˆã«ã™ã‚‹
* å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å³å¯†ã«æ›¸ã
* ä¾‹å¤–ã§ã¯ãªãæˆ»ã‚Šå€¤ã§å‡¦ç†åˆ¶å¾¡
* ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå¿—å‘ã‚ˆã‚Šã‚‚æ§‹é€ ä½“å¿—å‘
* å†å¸°ã‚ˆã‚Šã‚‚åå¾©ã¸ã®ç½®æ›ã‚’æ¤œè¨
* è¨ˆç®—é‡ãŒæŒ‡æ•°çš„ãªå ´åˆã«ç‰¹ã«å¨åŠ›ã‚’ç™ºæ®ã™ã‚‹é ˜åŸŸ

> ğŸ’¡ **ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆã‚¢ãƒ‰ãƒã‚¤ã‚¹**
> Codonæ€è€ƒã¨ã¯â€œå‹•çš„â†’é™çš„â€ã¸ã®æ„è­˜è»¢æ›ã§ã™ã€‚
> æ›¸ãæ–¹ãŒå¤‰ã‚ã‚‹ã¨ã€è¨­è¨ˆæ€æƒ³ã‚‚å¤‰ã‚ã‚‹ã€‚å‹•ãPythonã‹ã‚‰ã€**è€ƒãˆã‚‹Codon** ã¸ã€‚

---

## ğŸŒŒ ç¬¬10ç« ï¼šCodonã®æœªæ¥ã¨æ„ç¾©

Codon ã¯ã¾ã ç™ºå±•é€”ä¸ŠãªãŒã‚‰ã€**ã€ŒPythonã‚’ãã®ã¾ã¾é«˜é€Ÿè¨€èªã«ã™ã‚‹ã€å”¯ä¸€ã®ç¾å®Ÿçš„è§£** ã§ã™ã€‚ç§‘å­¦è¨ˆç®—ãƒ»AIãƒ»ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ»æœ€é©åŒ–ãªã©ã§åºƒãæ´»ç”¨ã§ãã€ç ”ç©¶ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’**ç›´æ¥æœ¬ç•ªãƒã‚¤ãƒŠãƒªã«å¤‰æ›**ã§ãã‚‹ã¨ã„ã†é©å‘½çš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å®Ÿè¨¼ã—ã¾ã—ãŸã€‚

ç§ãŒ N-Queens ã‚½ãƒ«ãƒãƒ¼ã‚’é€šã—ã¦å¾—ãŸç¢ºä¿¡ã¯ã“ã†ã§ã™ï¼š

> **Codon ã¯ â€œPython ã®çµ‚ç€ç‚¹â€ ã§ã¯ãªãã€â€œãƒã‚¤ãƒ†ã‚£ãƒ–åŒ–ã¸ã®æ©‹â€ ã§ã‚ã‚‹ã€‚**

* Codonã¯ã€ŒPythonã®çµ‚ç€ç‚¹ã€ã§ã¯ãªãã€Œãƒã‚¤ãƒ†ã‚£ãƒ–åŒ–ã®æ©‹ã€
* Codonã‚’çŸ¥ã‚‹ã¨ã€Pythonã‚³ãƒ¼ãƒ‰ã®æ›¸ãæ–¹è‡ªä½“ãŒå¤‰ã‚ã‚‹
* ç¾æ™‚ç‚¹ã§ã®åˆ¶ç´„ï¼šæ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåˆ¶é™ã€å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé€£æºã®é›£ã—ã•
* å°†æ¥çš„ã«æœŸå¾…ã•ã‚Œã‚‹æ–¹å‘ï¼šGPUçµ±åˆã€NumPyå¯¾å¿œã€RAG/AIç³»é€£æº
* å®Ÿè·µçš„æ¨å¥¨æ§‹æˆï¼ˆFedora42 + Codon v0.17 + Python3.13 + LLVM17ï¼‰

> ğŸ’¡ **ãƒ¯ãƒ³ãƒã‚¤ãƒ³ãƒˆã‚¢ãƒ‰ãƒã‚¤ã‚¹**
> Codonã¯ã€ŒPythonã§ã§ããªã„ã“ã¨ã‚’ç½®ãæ›ãˆã‚‹ã€ã‚‚ã®ã§ã¯ãªãã€
> **Pythonã‚’é€²åŒ–ã•ã›ã‚‹ãŸã‚ã®ã‚¨ãƒ³ã‚¸ãƒ³** ã§ã™ã€‚ç ”ç©¶ã‹ã‚‰è£½å“åŒ–ã¾ã§ã‚’ä¸€æ°—é€šè²«ã§çµã¶æ¶ã‘æ©‹ã«ãªã‚Šã¾ã™ã€‚

---

### ğŸ”® ä»Šå¾Œã®å±•æœ›

* GPU (NVPTX) å®Œå…¨å¯¾å¿œ
* NumPy äº’æ›å±¤ãƒ»OpenMP ä¸¦åˆ—æœ€é©åŒ–
* C API / Python API ã®ç›¸äº’é‹ç”¨å¼·åŒ–
* RAGãƒ»ç”ŸæˆAIãƒ»æœ€é©åŒ–ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¸ã®å¿œç”¨

---

## ğŸ§¾ Appendix: æˆæœã®è¦ç´„

* Constellationæ³• + Codon æœ€é©åŒ–ã§ CPUç‰ˆãŒ GPUç‰ˆã‚’è¶…ãˆã‚‹é€Ÿåº¦
* æ­£ã—ã„è§£æ•°ï¼ˆN=8â†’92, N=13â†’73712ï¼‰ã‚’å®Œå…¨å†ç¾
* Amazon Linux 2023 + LLVM17 + Codon0.17 ç’°å¢ƒã§å†ç¾å¯èƒ½
* Fedora42 ã§å®‰å®šç¨¼åƒï¼å†å¸°ãƒ»å†åˆ©ç”¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥å®Œå…¨å¯¾å¿œ
* CodonãŒã€Œé«˜é€ŸPythonå®Ÿé¨“ã€ã®æ¨™æº–åŸºç›¤ã«ãªã‚‹å¯èƒ½æ€§ã‚’å®Ÿè¨¼
* CPUç‰ˆã§CUDAç‰ˆã‚’ä¸Šå›ã‚‹æ€§èƒ½ã‚’ç¢ºèªï¼ˆç´„1.2å€ï¼‰
* Symmetry-aware pruning ã¨ Canonical check ã«ã‚ˆã‚‹æ•°å­¦çš„æ­£ç¢ºæ€§
* Codonç‰ˆã‚½ãƒ«ãƒãƒ¼ãŒå†ç¾ã—ãŸå…¬å¼è§£æ•°ï¼ˆN=8â†’92, N=13â†’73,712ãªã©ï¼‰
* Amazon Linux 2023 ç’°å¢ƒä¸‹ã§ã® reproducible benchmark log

---

## ğŸ“š é–¢é€£ãƒªãƒ³ã‚¯

* [Codon GitHub (Exaloop)](https://github.com/exaloop/codon)
* [N-Queens Project Archive](https://github.com/suzukiiichiro/N-Queens)
* [å…¬å¼ LLVM Documentation](https://llvm.org/docs/)
* [Codon Language Docs](https://docs.exaloop.io)

---

## ğŸ§‘â€ğŸ’» çµã³ã«

ã“ã“ã«è¨˜ã—ãŸå†…å®¹ã¯ã€å˜ãªã‚‹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµæœã®ç¾…åˆ—ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
Python ã®é™ç•Œã‚’çŸ¥ã‚Šã€Codon ã®è¨­è¨ˆæ€æƒ³ã‚’ç†è§£ã—ã€
**ã€Œæ›¸ãæ–¹ãã®ã‚‚ã®ã‚’å¤‰ãˆã‚‹ã€ã“ã¨ã§é€Ÿã•ã‚’å¾—ã‚‹** ã¨ã„ã†æ€æƒ³ã®è¨˜éŒ²ã§ã™ã€‚

> *â€œCodon is not just a compiler.
> Itâ€™s a mindset shift for Python programmers.â€*

---

### âœ¨ License

MIT License â€” Â© 2025 iichiro suzuki
